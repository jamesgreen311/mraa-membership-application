<!DOCTYPE html>
<html lang="en">
  <head>
    <base target="_top" />
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,0" />

    <link
      href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;600&display=swap"
      rel="stylesheet" />

    <link
      href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap"
      rel="stylesheet" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous" />

    <?!= include("Includes/css/mraa.inc"); ?>

    <title>MRAA New Applicants</title>
  </head>

  <body>
    <div class="container">
      <header>
        <div id="banner" class="banner">
          <div id="logo fs-2">
            <a href="https://www.metrorichmondart.org">MRAA</a>
            | 
            <a href="mailto:<?= membershipchairemail ?>" id="membershipChairEmail">Questions?</a>
          </div>
          <div id="title">
            <span class="fs-3">MRAA New Applicants</span>
          </div>
        </div>
      </header>
      <h2>Membership Requirements</h2>
      <p>
        If you would like to become a member of Metro Richmond Artists
        Association (MRAA), please fill out this online application.
      </p>
      <p>
        Exhibiting members work will be juried by the MRAA jury committee. We
        request at least 5 examples of your work and an additional 2 that show
        the back of two pieces. It's important to show the framing and hanging
        of your work. You will receive a letter informing you of the juries
        decision. If your work is not accepted at this time, you will
        automatically become an Associate Member until you are ready to
        re-submit your work. You may re-submit in a subsequent quarter.
      </p>
      <p>
        View membership
        <a href="https://metrorichmondart.org/membership-faq/" target="_blank"
          >FAQs</a
        >
      </p>
      <h3>Returning Applicant</h3>
      <p>
        Already submitted an application? 
      </p>
      <div class="d-sm-flex justify-content-start">
        <div class="p-2">
          <? var url = getScriptUrl()?>
          <a id="step2Button" href="<?=url?>?p=step2">
            <div class="step-label">
              <span class="material-symbols-outlined icon"> shopping_cart </span>
              <span>Step 2 - Pay Dues</span>
            </div>
          </a>
        </div>
        <div class="d-sm-flex justify-content-start">
          <div class="p-2">
            <a id="step3Button" href="<?=url?>?p=step3">
              <div class="step-label">
                <span class="material-symbols-outlined icon"> file_upload </span>
                <span>Step 3 - Exhibitors Upload Images </span>
              </div>
            </a>
          </div>
        </div>
      </div>      

      <div id="app"></div>
      <div id="messages"></div>

      <h3>New Applicants Start Here</h3>
      <div id="step1">
        <form action="#" class="needs-validation" id="formApplicant" novalidate>
          <div id="application">
            <div class="header">
              <span class="material-symbols-outlined icon"> person </span>
              <span class="text">About You</span>
            </div>
          </div>
          <div class="row mb-3 mt-2">
            <span class="fw-bold">Membership Type Requested</span>
          </div>
          <div class="row mb-3 mt-2">
            <div class="col-md-4">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="membershipType"
                  id="membershipType1"
                  value="Associate" />
                <label class="form-check-label" for="membershipType1">
                  Associate Membership - $45/year
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="membershipType"
                  id="membershipType2"
                  value="Exhibiting"
                  checked />
                <label class="form-check-label" for="membershipType2">
                  Exhibiting Membership - $45/year
                </label>
              </div>
            </div>
            <div class="col-md-8">
              <div class="help-message" id="membershipHelp">
                <p class="d-none" id="associateMembership">
                  Non-exhibiting artist membership is also encouraged.
                </p>
                <p id="exhibitingMembership">
                  Artists wishing to join and exhibit are juried.
                </p>
              </div>
            </div>
          </div>
          <div class="row mb-3 mt-2">
            <div class="col-md-6">
              <label for="emailAddress" class="col-form-label"
                >Email Address</label
              >
              <input
                type="text"
                name="emailAddress"
                id="emailAddress"
                class="form-control"
                placeholder="Required"
                required />
            </div>

            <div class="col-md-6">
              <label for="contactNumber" class="col-form-label"
                >Contact Number</label
              >
              <input
                type="text"
                name="contactNumber"
                id="contactNumber"
                class="form-control"
                placeholder="Required"
                required />
            </div>
          </div>

          <div class="row mb-3 mt-2">
            <label for="firstName" class="col-md-2 col-form-label"
              >First Name</label
            >
            <div class="col-md-4">
              <input
                type="text"
                name="firstName"
                id="firstName"
                class="form-control"
                placeholder="Required"
                required />
            </div>
            <label for="lastName" class="col-md-2 col-form-label"
              >Last Name</label
            >
            <div class="col-md-4">
              <input
                type="text"
                name="lastName"
                id="lastName"
                class="form-control"
                placeholder="Required"
                required />
            </div>
          </div>
          <div class="row mb-3 mt-2">
            <label for="streetAddress1" class="col-md-2 col-form-label"
              >Street Address</label
            >
            <div class="col-md-6">
              <input
                type="text"
                name="streetAddress1"
                id="streetAddress1"
                class="form-control"
                placeholder="Required"
                required />
            </div>
            <label for="streetAddress2" class="col-md-2 col-form-label"
              >Street Additional</label
            >
            <div class="col-md-2">
              <input
                type="text"
                name="streetAddress2"
                id="streetAddress2"
                class="form-control" />
            </div>
          </div>
          <div class="row mb-3 mt-2">
            <label for="city" class="col-md-1 col-form-label">City</label>
            <div class="col-md-3">
              <input
                type="text"
                name="city"
                id="city"
                class="form-control"
                placeholder="Required"
                required />
            </div>
            <label for="state" class="col-md-1 col-form-label">State</label>
            <div class="col-md-3">
              <input
                type="text"
                name="state"
                id="state"
                class="form-control"
                placeholder="Required"
                required />
            </div>
            <label for="zipCode" class="col-md-1 col-form-label">Zip</label>
            <div class="col-md-3">
              <input
                type="text"
                name="zipCode"
                id="zipCode"
                class="form-control"
                placeholder="Required"
                required />
            </div>
          </div>
          <div class="row mb-3 mt-2">
            <div class="col-md-12">
              <div>Mediums</div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB1"
                  name="mediums"
                  value="Acrylics" />
                <label class="form-check-label" for="mediumCB1">Acrylics</label>
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB2"
                  name="mediums"
                  value="Chalk Pastel" />
                <label class="form-check-label" for="mediumCB2"
                  >Chalk Pastel</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB3"
                  name="mediums"
                  value="Collage" />
                <label class="form-check-label" for="mediumCB3">Collage</label>
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB4"
                  name="mediums"
                  value="Colored Pencil" />
                <label class="form-check-label" for="mediumCB4"
                  >Colored Pencil</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB5"
                  name="mediums"
                  value="Encaustics" />
                <label class="form-check-label" for="mediumCB5"
                  >Encaustic</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB6"
                  name="mediums"
                  value="Generative" />
                <label class="form-check-label" for="mediumCB6"
                  >Generative</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB7"
                  name="mediums"
                  value="Jewelry" />
                <label class="form-check-label" for="mediumCB7">Jewelry</label>
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB8"
                  name="mediums"
                  value="Mixed Media" />
                <label class="form-check-label" for="mediumCB8"
                  >Mixed Media</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB9"
                  name="mediums"
                  value="Mosiac" />
                <label class="form-check-label" for="mediumCB9">Mosiac</label>
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB10"
                  name="mediums"
                  value="Oils" />
                <label class="form-check-label" for="mediumCB10">Oils</label>
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB11"
                  name="mediums"
                  value="Oil & Cold Wax" />
                <label class="form-check-label" for="mediumCB11"
                  >Oil & Cold Wax</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB12"
                  name="mediums"
                  value="Pastel" />
                <label class="form-check-label" for="mediumCB12">Pastel</label>
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB13"
                  name="mediums"
                  value="Pen & Ink" />
                <label class="form-check-label" for="mediumCB13"
                  >Pen & Ink</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB14"
                  name="mediums"
                  value="Photography" />
                <label class="form-check-label" for="mediumCB14"
                  >Photography</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB15"
                  name="mediums"
                  value="Print Making" />
                <label class="form-check-label" for="mediumCB15"
                  >Print Making</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB16"
                  name="mediums"
                  value="Screen Print" />
                <label class="form-check-label" for="mediumCB16"
                  >Screen Print</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB17"
                  name="mediums"
                  value="Soft Pastel" />
                <label class="form-check-label" for="mediumCB17"
                  >Soft Pastel</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB18"
                  name="mediums"
                  value="Steel" />
                <label class="form-check-label" for="mediumCB18">Steel</label>
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB19"
                  name="mediums"
                  value="Watercolor" />
                <label class="form-check-label" for="mediumCB19"
                  >Watercolor</label
                >
              </div>
              <div class="form-check form-check-inline col-md-3 col-lg-2">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="mediumCB20"
                  name="mediums"
                  value="Other" />
                <label class="form-check-label" for="mediumCB20">Other</label>
              </div>
            </div>
          </div>

          <div id="detailPersonInfo">
            <div class="header">
              <span class="material-symbols-outlined icon"> info </span>
              <span class="text">Background</span>
            </div>
            <div class="row mb-3 mt-2">
              <div class="col-md-6">
                <label for="reasonsForInterest" class="col-form-label"
                  >Reasons for Interest in Membership</label
                >
                <textarea
                  id="reasonsForInterest"
                  name="reasonsForInterest"
                  required
                  placeholder="Required"></textarea>
              </div>

              <div class="col-md-6">
                <label for="socialMediaLinks" class="col-form-label"
                  >Social Media Links</label
                >
                <textarea
                  id="socialMediaLinks"
                  name="socialMediaLinks"></textarea>
              </div>
            </div>
            <div class="row mb-3 mt-2">
              <div class="col-md-6">
                <label for="websites" class="col-form-label"
                  >Personal Websites</label
                >
                <textarea id="websites" name="websites"></textarea>
              </div>

              <div class="col-md-6">
                <label for="artEducationBackground" class="col-form-label"
                  >Art Education and Background</label
                >
                <textarea
                  id="artEducationBackground"
                  name="artEducationBackground"></textarea>
              </div>
            </div>
            <div class="row mb-3 mt-2">
              <div class="col-md-6">
                <label for="artAssociatedMemberships" class="col-form-label"
                  >Art Associated Memberships</label
                >
                <textarea
                  id="artAssociatedMemberships"
                  name="artAssociatedMemberships"></textarea>
              </div>

              <div class="col-md-6">
                <label for="exhibitions" class="col-form-label"
                  >Exhibitions</label
                >
                <textarea id="exhibitions" name="exhibitions"></textarea>
              </div>
            </div>
          </div>

          <div class="col-auto">
            <div id="uploadWaiting" class="uploading d-none">
              <div class="animation line-up">Saving Application, Please Wait ...</div>
            </div>
            <fieldset id="saveButtonFieldset">
              <button type="submit" class="btn btn-primary mb-3" id="saveButton">
                Save
              </button>
            </fieldset>
          </div>
        </form>
      </div>

      <footer class="footer">
        <div id="footer" class="footer mt-3">
          Metropolitan Richmond Artists Association |
          <span id="copyright">Copyright &copy;</span>
          <span id="year"></span>
        </div>
      </footer>
    </div>

    <?!= include("Includes/scripts/step1.inc"); ?>
<!--     <script>
      const messagesrepo = {

}
const session = {
}

// Page level 
function getNewApplicantId() {
/*   google.script.run
    .withSuccessHandler(setApplicantId)
    .generateUniqueId() */
}

function setApplicantId(resp) {
  const r = JSON.parse(resp)
  session.applicantid = r.applicantid
}

function applicantDetailBlock(toggle) {
  // toggle true is on/show, false is off/hide
  const applicantDetailBlock = document.getElementById("applicant-detail");
  if (toggle) {
    applicantDetailBlock.classList.remove("d-none");
  } else {
    applicantDetailBlock.classList.add("d-none");
  }
}

function uploadWaiting(toggle) {
  const uploadWaiting = document.getElementById("uploadWaiting");
  if (toggle) {
    uploadWaiting.classList.remove("d-none");
  } else {
    uploadWaiting.classList.add("d-none");
  }
}

function resetErrorMessages() {}

function resetDisplay() {}

function setCopyrightYear() {
  const year = document.getElementById("year");
  year.innerText = moment().format("YYYY");
}

function displaySupportContact(contact) {
  const supportcontact = document.getElementById("supportcontact");
  supportcontact.innerHTML = ` > <a href='mailto:${contact}'>Support Contact</a>`;
}

function setMembershipTypeMsg(e) {
  const type = this.value
  const associateMsg = document.getElementById("associateMembership")
  const exhibitingMsg = document.getElementById("exhibitingMembership")

  if (type==="associate") {
    associateMsg.classList.remove("d-none")
    exhibitingMsg.classList.add("d-none")
  } else {
    associateMsg.classList.add("d-none")
    exhibitingMsg.classList.remove("d-none")
  }
}
// PAGE LEVEL

// I/O Methods
// App settings
/* function fetchAppSettings() {
  google.script.run.withSuccessHandler(processAppSettings).getAppSettings();
} */

function processAppSettings(resp) {
  const r = JSON.parse(resp);
  appsettings.membershipChairpersonEmail = r.membershipChairpersonEmail;
  appsettings.membershipChairpersonName = r.membershipChairpersonName;
  appsettings.maxImageSize = r.maxImageSize;
  appsettings.techContact = r.techContact;
  appsettings.imageFolderId = r.imageFolderId;
}
// APP SETTINGS


function processApplication(resp) {
/* const validApplicant = resp.length > 0;
   if (validApplicant) {
    applicant.email = resp[0];
    applicant.firstname = resp[1];
    applicant.lastname = resp[2];
    applicant.phone = resp[10];
    applicant.status = resp[4];
    applicant.type = resp[12];

    applicantDetailBlock(true);
    fetchingApplicant(false);

  } else {
    applicant.email = id;
    applicant.firstname = "n/a";
    applicant.lastname = "n/a";
    applicant.phone = "n/a";
    applicant.status = "notvalid";
    applicant.type = "n/a";
  }
  displayApplicant(applicant);
  displaySupportContact(appsettings.techContact); */
}

function saveApplication(e) {
  e.preventDefault();
  //uploadWaiting(true);
  //const formfile = document.querySelector("#form-file");
  console.log(formApplicant)
  console.log(e)
  const formdata = new FormData(this);

/*   let _data = {};
  for (const [key, value] of payload) {
    _data[key] = value;
  }
  _data.filename = `${_data.lastname}-${_data.firstname}-${_data.worktitle}-${_data.medium}-${_data.width}x${_data.height}-${_data.price}`;
  _data.fileid = "";
  _data.applicant = "YES";
  _data.availability = "";
  _data.hidden = "";
  _data.fullname = applicant.firstname + " " + applicant.lastname;
  _data.timestamp = moment().format("MMMM Do YYYY, h:mm:ss a");

  return _data; */
}

// Start up
function loadPageElements() {
  //fetchAppSettings();
  if (!session.applicantid) {
    getNewApplicantId();
  }

  setCopyrightYear();
  setTestValues();
}

// Testing
function setTestValues() {
  emailAddress.value = "jon.tester@test.com"
  contactNumber.value = "555-111-2233"
  firstName.value = "Jon"
  lastName.value = "Tester"
  streetAddress1.value = "123 W Main St"
  city.value = "Anytown"
  state.value = "VA"
  zipCode.value = "55555"
  reasonsForInterest.value = "I'm a sucker with lots of money"
}

document.getElementById("formApplicant").addEventListener("submit", saveApplication)
document.addEventListener("DOMContentLoaded", loadPageElements);
document.getElementById("membershipType1").addEventListener("click", setMembershipTypeMsg)
document.getElementById("membershipType2").addEventListener("click", setMembershipTypeMsg)
    </script> -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"
      crossorigin="anonymous"></script>
  </body>
</html>
